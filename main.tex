% arara: xelatex: { shell: yes }
% arara: makeglossaries
% arara: biber
% arara: xelatex: { shell: yes }
% arara: xelatex: { shell: yes }
% arara: xelatex: { shell: yes }

\documentclass[thesis=B,czech]{template/FITthesisXE}
\usepackage{graphicx}
\usepackage{dirtree}
\usepackage{xevlna}
\usepackage{caption}
\usepackage{minted}
\usepackage{rotating}
\usepackage{anyfontsize}
\usepackage{listings}
\usepackage[export]{adjustbox}

\newcommand{\uv}[1]{\quotedblbase #1\textquotedblleft}

\bibliography{library.bib}

% usage: \imagefigure{filename}{description}
\newcommand{\imagefigurefull}[3]{
    \begin{figure}[htbp]
    \centering
        \includegraphics[width=#3\linewidth]{media/#1}
        \caption{#2 \label{pic:#1}}
    \end{figure}
}


\newcommand{\imagefigurelarge}[2]{
    \imagefigurefull{#1}{#2}{.99}
}


\newcommand{\imagefigure}[2]{
    \imagefigurefull{#1}{#2}{.6}
}

\makeglossaries
\input{glossary.tex}
\glsaddall	% add even unused acronyms


\department{Katedra počítačových systémů}
\title{Minimalistický CI systém}
\authorGN{Martin}
\authorFN{Franc}
\authorWithDegrees{Martin Franc}
\author{Martin Franc}
\supervisor{Ing. Jakub Jirůtka}
% \acknowledgements{Doplňte, máte-li komu a za co děkovat. V~opačném případě úplně odstraňte tento příkaz.}
\abstractEN{\input abstract_en.tex}
\abstractCS{\input abstract_cs.tex}
\placeForDeclarationOfAuthenticity{V~Praze}
\declarationOfAuthenticityOption{4}
\keywordsCS{CI, kontinuální integrace, virtualizace, LXD}
\keywordsEN{CI, continuous integration, virtualization, LXD}
\assignment{assignment.pdf}


\begin{document}

\input chapters/uvod.tex
\chapter{Úvod do problematiky}

Tento popis je velmi obecný a proto bude vhodné se podívat na nějaký konkrétní projekt používající kontinuální integraci.
Vezmeme například projekt Nette, který umožňuje stavbu webových aplikací.
Repozitáře projektu jsou verzované verzovacím nástrojem Git a další integrace je pod systémem kontinuální integrace Travis CI.

\begin{enumerate}
	\item Zkontroluj syntakticky správný zápis programu.
	\item Spusť integrační a jednotkové testy pro verze PHP 7.1 a 7.2 pro terminálové rozhraní (php-cgi) a webové (php).
	\item Předej informace o testovaní službě třetí strany.
\end{enumerate}

Z tohoto nám vznikne 6 úkolů:

\begin{itemize}
	\item Kontrola syntaxe.
	\item Testy na php 7.1.
	\item Testy na php 7.2.
	\item Testy na php-cgi 7.1.
	\item Testy na php-cgi 7.2.
	\item Předání informací o testování službě třetí strany.
\end{itemize}

Jelikož nemá smysl pouštět jakékoliv testování, pokud program není zapsán syntakticky správně, tak jako první provedeme kontrolu syntaxe.
Po zkontrolovaní syntaktické správnosti spustíme integrační a jednotkové testy.
Protože testy na sobě nijak nezávisí, tak je možné je pustit paralelně, abychom zkrátili dobu testování.
Po dokončení testování předáme výsledky službě třetí strany.

Skupiny testů, které jsou na sobě nezávislé a je možné je paralelizovat nazýváme fází.
V tomto konkrétním případě nám vzniknou 3 fáze:

\begin{itemize}
	\item Kontrola syntaxe.
	\item Testy.
	\item Předání informací o testování službě třetí strany.
\end{itemize}

Od systému kontinuální integrace tedy očekáváme určitou možnost integrační proces řídit.
Většinou se jedná o rozdělení na fáze a úkoly, ale také o další možnosti, které budou probrány u konkrétních systémů CI.

Uživatele CI systému také zajímá výstup z jeho zadaných příkazů.
Velmi vhodné je to například při hledání chyby, kdy by pouhá informace o neúspěchu integrace byla nedostačující.
Mnoho CI systémů implementuje tzv. \uv{streaming logy}, což znamená, že výstup z příkazů je dostupný v \uv{reálném čase} místo nutnosti čekat na doběhnutí celé integrace.

S technikou kontinuální integrace souvisí i technika kontinuálního nasazení (zkráceně CD).
Tato technika vychází z toho, že pokud je projekt otestovaný a sestavený, tak jej je možné nasadit do produkce.
Mnoho systémů na kontinuální integraci v sobě kombinují i kontinuální nasazení.

\input chapters/sw-testovani.tex
\input chapters/scm.tex
\input chapters/behove.tex
\chapter{Analýza existujících CI řešení}
\input chapters/gitlab.tex
\input chapters/travis.tex
\input chapters/buildbot.tex
\input chapters/navrh.tex
\input chapters/implementace.tex
\input chapters/testovani.tex
\input chapters/zaver.tex

\printbibliography[]


\appendix

\chapter{Seznam zkratek}
\printglossary[type=\acronymtype,style=acronyms]

\input{medium.tex}
\input{dokumentace.tex}

\end{document}
