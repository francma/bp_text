\chap Návrh architektury systému

Systém CI pod sebou bude spravovat několik Runnerů, každý Runner v~sobě bude spouštět jednotlivé exekutory.
Komunikace bude probíhat přes API.
Jakákoliv funkcionalita by měla být zprvu naimlementovaná jako API endpoint a až pak zavedena do systému.

\sec Části systému

\secc Informační rozhraní

Webové rozhraní.
Napsané ve Flasku a nějaké hipster frontend JS knihovně.

\secc Řidič

Zajišťuje komunikaci s~uživatelem, informačním rozhraním a Runnery na pevně daném protokolu.
Řidič by měl být podle vytížení Runnerů (API endpoint na Runneru) a požadovaných služeb rozhodnout, kterému Runneru práci předá.

\secc Runner

Zadaný API vstup rozparsuj pro potřeby Exekutoru a nech ho provést dané příkazy.
Runner by měl spravovat pouze jeden typ exekutoru (UNIX like).
Runner by měl běžet na samostatném stroji, aby neubíral systémové prostředky ostatním.
Runner v~sobě většinou bude spouštět více instancí Exekutoru.

\seccc Exekutor

Konečný vykonavatel příkazů. Řidič by neměl o~existenci exekutorů vědět a komunikovat pouze s~Runnery.
Exekutorem je například VirtualBox, Docker a jiné.
Samotná exekutor by měl být co nejméně modifikovaný.
Nechceme například aby VirtualBox exekutor přijímal pouze image, které mají nainstalovaný nějaký obsáhlý set závislostí.

\secc Cache

Jelikož by cache měla být sdílená mezi Runnery, pak musí fungovat jako samostatná jednotka.
Runner by měl komunikovat přímo s~cache, aby se minimalizovat počet účastníků v~přenosu často velkých souborů.
Prvnotní komunikace bude vázána se systémem (výměna adres).
Je opravdu nutné separovat Cache jako service?

\input text/navrh/komunikace_prohlizec_system.tex
\input text/navrh/komunikace_system.tex
\input text/navrh/komunikace_system_behove.tex
\input text/navrh/persistence_dat.tex

\sec Zabíjení buildů

Build nevyprodukoval žádný výstup za x minut nebo nedoběhl za y minut.

\sec Kde poběží CI?

virtualenv?
konrejner?
